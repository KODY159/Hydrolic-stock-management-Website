<!doctype html>
<html lang="th">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏≤‡∏¢‡πÑ‡∏Æ‡∏î‡∏£‡∏≠‡∏•‡∏¥‡∏Ñ ‡∏£‡πâ‡∏≤‡∏ô‡∏û‡∏£‡∏∞‡∏û‡∏£‡∏´‡∏°‡πÑ‡∏Æ‡∏î‡∏£‡∏≠‡∏•‡∏¥‡∏Ñ</title>
        <link rel="stylesheet" href="css/styles.css" />
    </head>
    <body>
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏≤‡∏¢‡πÑ‡∏Æ‡∏î‡∏£‡∏≠‡∏•‡∏¥‡∏Ñ ‡∏£‡πâ‡∏≤‡∏ô‡∏û‡∏£‡∏∞‡∏û‡∏£‡∏´‡∏°‡πÑ‡∏Æ‡∏î‡∏£‡∏≠‡∏•‡∏¥‡∏Ñ</h1>
                <div class="header-actions">
                    <a
                        href="login.html"
                        class="btn btn-outline"
                        style="border-color: white; color: black"
                    >
                        üîê Admin Login
                    </a>
                </div>
            </div>
        </header>

        <div class="container">
            <!-- Loading Indicator -->
            <div
                id="loadingIndicator"
                class="card text-center"
                style="padding: 3rem"
            >
                <div
                    class="loading"
                    style="width: 40px; height: 40px; margin: 0 auto 1rem"
                ></div>
                <p style="color: var(--text-light)">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...</p>
            </div>

            <!-- Main Content (Initially Hidden) -->
            <div id="mainContent" class="hidden">
                <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                        <button
                            class="btn btn-secondary btn-sm"
                            onclick="clearAll()"
                        >
                            üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                        </button>
                    </div>

                    <div class="grid grid-2">
                        <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢‡πÑ‡∏Æ‡∏î‡∏£‡∏≠‡∏•‡∏¥‡∏Ñ -->
                        <div>
                            <h3
                                style="
                                    margin-bottom: 1rem;
                                    color: var(--primary);
                                "
                            >
                                ‡∏™‡∏≤‡∏¢‡πÑ‡∏Æ‡∏î‡∏£‡∏≠‡∏•‡∏¥‡∏Ñ
                            </h3>

                            <div class="form-group">
                                <label class="form-label">‡∏ä‡∏ô‡∏¥‡∏î‡∏™‡∏≤‡∏¢</label>
                                <select
                                    id="hoseType"
                                    class="form-select"
                                    onchange="updateHoseSizes()"
                                >
                                    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏ô‡∏¥‡∏î‡∏™‡∏≤‡∏¢ --</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">‡∏Ç‡∏ô‡∏≤‡∏î</label>
                                <select
                                    id="hoseSize"
                                    class="form-select"
                                    onchange="updateHosePrice()"
                                >
                                    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î --</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß (‡πÄ‡∏°‡∏ï‡∏£)</label>
                                <input
                                    type="number"
                                    id="hoseLength"
                                    class="form-input"
                                    min="0"
                                    step="0.1"
                                    placeholder="0.0"
                                    onchange="updateHosePrice()"
                                />
                            </div>

                            <div class="form-group">
                                <label class="form-label">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡πÄ‡∏°‡∏ï‡∏£</label>
                                <input
                                    type="text"
                                    id="hosePricePerUnit"
                                    class="form-input"
                                    disabled
                                    value="0.00 ‡∏ö‡∏≤‡∏ó"
                                    style="background: var(--bg-light)"
                                />
                            </div>

                            <button
                                class="btn btn-primary"
                                style="width: 100%"
                                onclick="addHoseToCart()"
                            >
                                ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏≤‡∏¢‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                            </button>
                        </div>

                        <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏™‡∏≤‡∏¢ -->
                        <div>
                            <h3
                                style="
                                    margin-bottom: 1rem;
                                    color: var(--success);
                                "
                            >
                                ‡∏´‡∏±‡∏ß‡∏™‡∏≤‡∏¢‡πÑ‡∏Æ‡∏î‡∏£‡∏≠‡∏•‡∏¥‡∏Ñ
                            </h3>

                            <div class="form-group">
                                <label class="form-label">‡∏ä‡∏ô‡∏¥‡∏î‡∏´‡∏±‡∏ß</label>
                                <select
                                    id="fittingType"
                                    class="form-select"
                                    onchange="updateFittingSizes()"
                                >
                                    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏ô‡∏¥‡∏î‡∏´‡∏±‡∏ß --</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">‡∏Ç‡∏ô‡∏≤‡∏î</label>
                                <select
                                    id="fittingSize"
                                    class="form-select"
                                    onchange="updateFittingPrice()"
                                >
                                    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î --</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡∏ä‡∏¥‡πâ‡∏ô)</label>
                                <input
                                    type="number"
                                    id="fittingQuantity"
                                    class="form-input"
                                    min="0"
                                    step="1"
                                    placeholder="0"
                                    onchange="updateFittingPrice()"
                                />
                            </div>

                            <div class="form-group">
                                <label class="form-label">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏ä‡∏¥‡πâ‡∏ô</label>
                                <input
                                    type="text"
                                    id="fittingPricePerUnit"
                                    class="form-input"
                                    disabled
                                    value="0.00 ‡∏ö‡∏≤‡∏ó"
                                    style="background: var(--bg-light)"
                                />
                            </div>

                            <button
                                class="btn btn-success"
                                style="width: 100%"
                                onclick="addFittingToCart()"
                            >
                                ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏±‡∏ß‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">üõí ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                        <span
                            id="cartCount"
                            class="badge badge-primary"
                            style="
                                font-size: 1rem;
                                padding: 0.5rem 1rem;
                                background: var(--primary);
                            "
                        >
                            0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                        </span>
                    </div>

                    <div id="cartItems">
                        <div
                            class="text-center"
                            style="padding: 3rem; color: var(--text-light)"
                        >
                            <p style="font-size: 1.125rem">
                                ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                            </p>
                            <p style="font-size: 0.875rem; margin-top: 0.5rem">
                                ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
                            </p>
                        </div>
                    </div>

                    <!-- ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î -->
                    <div id="cartSummary" class="hidden">
                        <div class="summary-box">
                            <div class="summary-row">
                                <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</span>
                                <span id="totalPrice">0.00 ‡∏ö‡∏≤‡∏ó</span>
                            </div>
                            <div class="summary-row">
                                <span>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î:</span>
                                <span id="discount">0.00 ‡∏ö‡∏≤‡∏ó</span>
                            </div>
                            <div class="summary-row">
                                <span>‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥:</span>
                                <span id="netPrice">0.00 ‡∏ö‡∏≤‡∏ó</span>
                            </div>
                        </div>

                        <div
                            style="display: flex; gap: 1rem; margin-top: 1.5rem"
                        >
                            <button
                                class="btn btn-primary btn-lg"
                                style="flex: 1"
                                onclick="printReceipt()"
                            >
                                üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
                            </button>
                            <button
                                class="btn btn-secondary btn-lg"
                                style="flex: 1"
                                onclick="saveOrder()"
                            >
                                üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Receipt Template (‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå) -->
        <div id="receiptTemplate" class="hidden" style="padding: 2rem">
            <div style="text-align: center; margin-bottom: 2rem">
                <h1 style="font-size: 1.5rem">‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</h1>
                <p>‡∏£‡πâ‡∏≤‡∏ô‡∏™‡∏≤‡∏¢‡πÑ‡∏Æ‡∏î‡∏£‡∏≠‡∏•‡∏¥‡∏Ñ</p>
                <p style="font-size: 0.875rem; color: #666">
                    ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà: <span id="receiptNumber">-</span><br />
                    ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: <span id="receiptDate">-</span>
                </p>
            </div>

            <table
                style="
                    width: 100%;
                    border-collapse: collapse;
                    margin-bottom: 2rem;
                "
            >
                <thead>
                    <tr style="border-bottom: 2px solid #000">
                        <th style="text-align: left; padding: 0.5rem">
                            ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                        </th>
                        <th style="text-align: center; padding: 0.5rem">
                            ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
                        </th>
                        <th style="text-align: right; padding: 0.5rem">‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                    </tr>
                </thead>
                <tbody id="receiptItems"></tbody>
            </table>

            <div style="text-align: right; font-size: 1.125rem">
                <div style="margin-bottom: 0.5rem">
                    <strong>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</strong>
                    <span id="receiptTotal">0.00</span> ‡∏ö‡∏≤‡∏ó
                </div>
                <div style="font-size: 1.5rem; font-weight: bold">
                    <strong>‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥:</strong>
                    <span id="receiptNet">0.00</span> ‡∏ö‡∏≤‡∏ó
                </div>
            </div>

            <div
                style="
                    text-align: center;
                    margin-top: 3rem;
                    padding-top: 1rem;
                    border-top: 1px solid #ccc;
                "
            >
                <p style="font-size: 0.875rem">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</p>
            </div>
        </div>

        <!-- ========================================
         SCRIPTS - ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô!
    ======================================== -->

        <!-- 1. Firebase SDK Compat (v9) -->
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

        <!-- 2. Firebase Config (‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏•‡∏±‡∏á SDK) -->
        <script src="js/firebase.js"></script>

        <!-- 3. Calculator (‡∏´‡∏•‡∏±‡∏á firebase.js) -->
        <script src="js/calculator.js"></script>

        <!-- 4. Receipt -->
        <script src="js/receipt.js"></script>
    </body>
</html>
